import type { OnHomePageHandler } from '@metamask/snaps-sdk';
import { image, copyable, divider, panel, text } from '@metamask/snaps-sdk';

import { getWallet } from '@/config';
import { getQtumAddress } from '@/helpers/format';

export const onHomePage: OnHomePageHandler = async () => {
  const wallet = await getWallet();

  return {
    content: panel([
      image(
        '<svg version="1.2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 501 493" width="501" height="493">\n' +
          '  <title>Layer 1</title>\n' +
          '  <style>\n' +
          '    .s0 { fill: #0645f7 }\n' +
          '  </style>\n' +
          '  <g id="Layer 1">\n' +
          '    <g id="-e-&lt;Group&gt;">\n' +
          '      <path id="&lt;Compound Path&gt;" fill-rule="evenodd" class="s0"\n' +
          '            d="m481.9 493c-10.2 0-18.5-8.3-18.5-18.5 0-10.3 8.3-18.6 18.5-18.6 10.2 0 18.5 8.3 18.5 18.6 0 10.2-8.3 18.5-18.5 18.5zm-103.8-314.8v135.3l107.3 107.3c5.7 5.8 7.7 14.7 4 21.9-6.3 12.2-21.7 13.9-30.5 5.1l-113-113.1c-3.7-3.7-5.6-8.6-5.6-13.4v-150.9c0-4.9 1.9-9.7 5.6-13.4l69.2-69.3c5.9-5.9 14.9-7.9 22.3-4.1 12 6.4 13.6 21.6 4.9 30.4zm94.3 58.5c-10.3 0-18.7-8.4-18.7-18.8 0-10.3 8.4-18.7 18.7-18.7 10.4 0 18.7 8.4 18.7 18.7 0 10.4-8.3 18.8-18.7 18.8zm-37.6-33.2v34.2h-37.8v-41.9c0-4.8 1.8-9.6 5.5-13.3l44.2-43.8c5.8-5.8 14.8-7.8 22.1-4 12.1 6.2 13.8 21.4 5 30.1zm34.1 156c-7.3 3.8-16.3 1.8-22.1-4l-44.2-43.8c-3.7-3.6-5.5-8.4-5.5-13.2v-42h37.7v34.2l39.1 38.7c8.8 8.7 7.1 23.9-5 30.1zm3.6-66.7c-10.3 0-18.7-8.4-18.7-18.7 0-10.4 8.4-18.7 18.7-18.7 10.3 0 18.7 8.3 18.7 18.7 0 10.3-8.4 18.7-18.7 18.7zm-137.8-148.8c-3.7 3.7-8.5 5.5-13.4 5.5h-150.6c-4.8 0-9.6-1.8-13.3-5.5l-69.3-69.4c-5.8-5.8-7.8-14.7-4-22 6.2-12.1 21.6-13.8 30.3-5l64.1 64.1h135l63.7-63.7c5.8-5.8 14.9-7.9 22.2-4 12 6.3 13.7 21.5 4.9 30.3zm-20.5-56.7c-3.7 3.7-8.5 5.5-13.4 5.5h-42.2v-37.7h34.4l38.6-38.7c5.8-5.8 14.9-7.9 22.2-4 12 6.3 13.7 21.5 4.9 30.3zm-40-49.3c-10.3 0-18.7-8.4-18.7-18.7 0-10.4 8.4-18.8 18.7-18.8 10.3 0 18.7 8.4 18.7 18.8 0 10.3-8.4 18.7-18.7 18.7zm-76.7 54.8c-4.8 0-9.7-1.8-13.4-5.5l-44.2-44.3c-5.8-5.8-7.7-14.7-4-21.9 6.3-12.2 21.6-13.9 30.4-5.1l39 39.1h34.4v37.7zm20.6-54.8c-10.3 0-18.7-8.4-18.7-18.7 0-10.4 8.4-18.8 18.7-18.8 10.4 0 18.7 8.4 18.7 18.8 0 10.3-8.3 18.7-18.7 18.7zm-66.5 132.5v150.9c0 4.9-1.8 9.7-5.5 13.4l-69.3 69.3c-5.8 5.9-14.9 7.9-22.2 4.1-12-6.4-13.7-21.6-4.9-30.4l64.2-64.2v-135.2l-63.9-64c-5.8-5.7-7.7-14.7-4-21.9 6.3-12.2 21.6-13.9 30.4-5.1l69.7 69.8c3.7 3.7 5.5 8.5 5.5 13.3zm-62.2 12c3.7 3.6 5.6 8.4 5.6 13.2v42h-37.8v-34.2l-38.6-38.3c-5.9-5.8-7.9-14.8-4.1-22.1 6.4-11.9 21.6-13.5 30.3-4.8zm-69.7 16.7c10.3 0 18.7 8.4 18.7 18.7 0 10.3-8.4 18.7-18.7 18.7-10.3 0-18.7-8.4-18.7-18.7 0-10.3 8.4-18.7 18.7-18.7zm0 56.1c10.3 0 18.7 8.4 18.7 18.8 0 10.3-8.4 18.7-18.7 18.7-10.3 0-18.7-8.4-18.7-18.7 0-10.4 8.4-18.8 18.7-18.8zm37.5 35.4v-34.2h37.8v42c0 4.7-1.9 9.5-5.6 13.2l-44.2 43.8c-5.8 5.8-14.8 7.8-22.1 4-12.1-6.2-13.8-21.4-5-30.1zm100.2 53.2c3.6-3.6 8.5-5.5 13.3-5.5h150.6c4.8 0 9.7 1.9 13.4 5.5l112.6 112.8c5.8 5.8 7.7 14.7 4 21.9-6.3 12.2-21.6 13.9-30.4 5.1l-107.4-107.5h-135l-63.6 63.7c-5.9 5.9-14.9 7.9-22.3 4.1-12-6.4-13.6-21.6-4.9-30.4zm26.9 56.7c3.7-3.7 8.5-5.5 13.3-5.5h42.3v37.8h-34.5l-38.5 38.6c-5.9 5.8-15 7.9-22.3 4-12-6.3-13.6-21.5-4.9-30.3zm34 53.4c10.3 0 18.7 8.4 18.7 18.7 0 10.4-8.4 18.8-18.7 18.8-10.4 0-18.8-8.4-18.8-18.8 0-10.3 8.4-18.7 18.8-18.7zm82.8-58.9c4.8 0 9.6 1.8 13.3 5.5l44.2 44.3c5.8 5.8 7.8 14.7 4.1 21.9-6.3 12.2-21.6 13.9-30.4 5.1l-39.1-39h-34.4v-37.8zm-26.7 58.9c10.3 0 18.7 8.4 18.7 18.7 0 10.4-8.4 18.8-18.7 18.8-10.3 0-18.7-8.4-18.7-18.8 0-10.3 8.4-18.7 18.7-18.7z"/>\n' +
          '      <path id="&lt;Compound Path&gt;" fill-rule="evenodd" class="s0"\n' +
          '            d="m434.8 203.5v34.2h-37.8v-41.9c0-4.8 1.9-9.6 5.5-13.3l44.2-43.8c5.9-5.7 14.9-7.7 22.1-4 12.2 6.3 13.9 21.4 5.1 30.1zm34 156.1c-7.3 3.7-16.2 1.7-22.1-4l-44.2-43.9c-3.7-3.6-5.5-8.4-5.5-13.2v-41.9h37.8v34.1l39 38.8c8.8 8.7 7.2 23.8-5 30.1zm-134.2-215.6c-3.7 3.7-8.5 5.5-13.3 5.5h-150.6c-4.9 0-9.7-1.8-13.4-5.5l-69.3-69.4c-5.8-5.8-7.7-14.7-4-21.9 6.3-12.2 21.6-13.9 30.4-5.1l64.1 64.2h135l63.6-63.8c5.8-5.8 14.9-7.9 22.2-4 12.1 6.3 13.7 21.5 4.9 30.3zm-20.5-56.7c-3.7 3.7-8.5 5.6-13.4 5.6h-42.2v-37.8h34.4l38.6-38.6c5.9-5.9 14.9-8 22.2-4.1 12.1 6.3 13.7 21.6 5 30.3zm-40.1-49.3c-10.3 0-18.7-8.4-18.7-18.7 0-10.4 8.4-18.7 18.7-18.7 10.3 0 18.7 8.3 18.7 18.7 0 10.3-8.4 18.7-18.7 18.7zm-76.7 54.9c-4.8 0-9.7-1.9-13.3-5.6l-44.3-44.3c-5.7-5.7-7.7-14.7-4-21.9 6.3-12.2 21.6-13.9 30.4-5.1l39 39.1h34.5v37.8zm20.6-54.9c-10.4 0-18.8-8.4-18.8-18.7 0-10.4 8.4-18.7 18.8-18.7 10.3 0 18.7 8.3 18.7 18.7 0 10.3-8.4 18.7-18.7 18.7zm-66.5 132.6v150.9c0 4.8-1.9 9.6-5.6 13.3l-69.2 69.4c-5.9 5.8-14.9 7.9-22.3 4-12-6.3-13.6-21.6-4.9-30.3l64.2-64.3v-135.2l-63.9-63.9c-5.7-5.8-7.7-14.7-4-22 6.3-12.2 21.6-13.9 30.4-5.1l69.7 69.8c3.7 3.7 5.6 8.5 5.6 13.4zm-62.2 11.9c3.6 3.7 5.5 8.5 5.5 13.3v41.9h-37.8v-34.2l-38.6-38.3c-5.9-5.8-7.9-14.8-4-22 6.3-12 21.5-13.6 30.3-4.9zm-69.8 16.7c10.4 0 18.7 8.4 18.7 18.7 0 10.4-8.3 18.7-18.7 18.7-10.3 0-18.7-8.3-18.7-18.7 0-10.3 8.4-18.7 18.7-18.7zm0 56.2c10.4 0 18.7 8.3 18.7 18.7 0 10.3-8.3 18.7-18.7 18.7-10.3 0-18.7-8.4-18.7-18.7 0-10.4 8.4-18.7 18.7-18.7zm37.5 35.3v-34.1h37.8v41.9c0 4.8-1.9 9.6-5.5 13.2l-44.3 43.8c-5.8 5.8-14.8 7.8-22.1 4.1-12.1-6.3-13.8-21.4-5-30.2zm100.2 53.3c3.7-3.7 8.5-5.6 13.3-5.6h150.6c4.9 0 9.7 1.9 13.4 5.6l112.6 112.7c5.8 5.8 7.8 14.7 4 22-6.3 12.2-21.6 13.8-30.4 5l-107.4-107.5h-135l-63.6 63.7c-5.8 5.9-14.9 7.9-22.2 4.1-12.1-6.4-13.7-21.6-4.9-30.3zm26.8 56.6c3.7-3.7 8.5-5.5 13.4-5.5h42.2v37.8h-34.4l-38.6 38.6c-5.9 5.9-14.9 7.9-22.2 4.1-12.1-6.4-13.7-21.6-5-30.4zm34 53.4c10.3 0 18.7 8.4 18.7 18.8 0 10.3-8.4 18.7-18.7 18.7-10.4 0-18.7-8.4-18.7-18.7 0-10.4 8.3-18.8 18.7-18.8zm82.8-58.9c4.8 0 9.7 1.9 13.3 5.5l44.3 44.3c5.7 5.8 7.7 14.7 4 22-6.3 12.2-21.6 13.9-30.4 5.1l-39-39.1h-34.5v-37.8zm-26.7 58.9c10.4 0 18.7 8.4 18.7 18.8 0 10.3-8.3 18.7-18.7 18.7-10.3 0-18.7-8.4-18.7-18.7 0-10.4 8.4-18.8 18.7-18.8z"/>\n' +
          '    </g>\n' +
          '  </g>\n' +
          '</svg>\n',
      ),
      text('Qtum lives right in your MetaMask.'),

      ...(wallet.address
        ? [
            divider(),

            text('Your Qtum address:'),
            copyable({
              value: (await getQtumAddress()) || 'Not created yet',
            }),

            text('Your Qtum address in hexadecimal format:'),
            copyable({
              value: wallet.address,
            }),
          ]
        : []),
    ]),
  };
};
